<Window x:Class="cryptography.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Icon="/Resources/windowIcon.ico" mc:Ignorable="d" Background="{DynamicResource BackgroundBrush}" Foreground="{DynamicResource ForegroundBrush}" Title="File Encryptor" Height="420" Width="700">
	<Grid Margin="12">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>
		
		
		<StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8">
			<TextBox Width="420" Text="{Binding InputFilePath, Mode=TwoWay}" IsReadOnly="True"/>
			<Button Content="Browse..." Command="{Binding BrowseInputCommand}" Margin="8,0,0,0" Width="90"/>
			<Button Content="Clear" Command="{Binding ClearInputCommand}" Margin="8,0,0,0" Width="60"/>
		</StackPanel>
		
		
		<StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,0,0,8" VerticalAlignment="Center">
			<Label Content="Algorithm:" VerticalAlignment="Center"/>
			<ComboBox Width="110" ItemsSource="{Binding Algorithms}" SelectedItem="{Binding SelectedAlgorithm}" DisplayMemberPath="Name" Margin="6,0,12,0"/>
			<Label Content="Mode:" VerticalAlignment="Center"/>
			<ComboBox Width="90" ItemsSource="{Binding Modes}" SelectedItem="{Binding SelectedMode}" DisplayMemberPath="Name" Margin="6,0,12,0"/>
			<CheckBox Content="Use Password" IsChecked="{Binding UsePassword}" VerticalAlignment="Center"/>
			<PasswordBox Width="180" Margin="8,0,0,0" PasswordChanged="PasswordBox_PasswordChanged" Visibility="{Binding UsePassword, Converter={StaticResource BoolToVis}}"/>
		</StackPanel>
		
		
		<StackPanel Grid.Row="2" Margin="0,0,0,8">
			<TextBlock Text="Key management" FontWeight="Bold" Margin="0,0,0,4"/>
			
			<WrapPanel Orientation="Horizontal" Margin="0, 0, 0, 5">
				<Button Content="Generate Key" Command="{Binding GenerateKeyCommand}" Width="110"/>
				<Button Content="Import Key" Command="{Binding ImportKeyCommand}" Width="100" Margin="6,0,0,0"/>
				<Button Content="Export Key" Command="{Binding ExportKeyCommand}" Width="100" Margin="6,0,0,0"/>
				<TextBox Text="{Binding KeyDisplay}" Width="300" IsReadOnly="True" Margin="8,0,0,0"/>
			</WrapPanel>
			
			<Separator Margin="0,5"/>
			
			<WrapPanel Margin="0,5,0,0">
				<Button Content="Encrypt" Command="{Binding EncryptCommand}" Width="120"/>
				<Button Content="Decrypt" Command="{Binding DecryptCommand}" Width="120" Margin="8,0,0,0"/>
				<ProgressBar Width="300" Height="20" Margin="12,8,0,0" IsIndeterminate="{Binding IsBusy}" Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}"/>
			</WrapPanel>
			<Button Content="{Binding ThemeButtonText}" Command="{Binding ToggleThemeCommand}" HorizontalAlignment="Right" Padding="10,5" Margin="5"/>
			<TextBlock Text="{Binding StatusMessage}" Margin="0,12,0,0" TextWrapping="Wrap"/>
		</StackPanel>
		
		
		<TextBlock Grid.Row="3" Text="Tip: Password + PBKDF2 uses a random salt stored in the file; others with the password can decrypt the file." FontStyle="Italic" Foreground="Gray"/>
	</Grid>
</Window>